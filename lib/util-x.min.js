/**
 * @file {@link http://xotic750.github.io/util-x/ util-x}. A Javascript utility library..
 * @version 0.0.46
 * @author Graham Fairweather <xotic750@gmail.com>
 * @copyright Copyright (c) 2013 Graham Fairweather
 * @license {@link <http://www.gnu.org/licenses/gpl-3.0.html> GPL3}
 * @module util-x
 */
!function(globalThis){"use strict";function factory(){function stringSplitReplacer(a,b,c){var d,e=c.length-2;utilx.arrayFirst(b).replace(a,function(){for(d=1;utilx.lt(d,e);d+=1)utilx.isUndefined(arguments[d])&&utilx.arrayAssign(b,d,utilx.privateUndefined)})}function buildTestString(a,b){return a+String.fromCharCode(b)}function ObjectCreateFunc(){}function makeCustomError(a,b,c){function d(a,e){var f;utilx.isString(a)||(a=utilx.stringTruncate(utilx.jsonStringify(a,utilx.customErrorReplacer),c)),this.message=a,utilx.isFunction(e)||(e=d),this.stackStartFunction=e,utilx.isFunction(b.captureStackTrace)?b.captureStackTrace(this,this.stackStartFunction):(f=b.call(this),utilx.isString(f.stack)?this.stack=f.stack:utilx.isString(f.stacktrace)&&(this.stack=f.stacktrace))}if(!utilx.isString(a)||utilx.isEmptyString(a))throw new TypeError('"name" was not a valid string');if(!utilx.isErrorTypeConstructor(b))throw new TypeError('"ErrorConstructor" was not an Error type');return c=utilx.toNumber(c),(utilx.numberIsNaN(c)||utilx.lt(c,64))&&(c=128),utilx.inherits(d,b),utilx.objectDefineProperties(d.prototype,{name:{value:a,enumerable:!1,writable:!0,configurable:!0},toString:{value:function(){return this.toStringX()},enumerable:!1,writable:!0,configurable:!0},toStringX:{value:function(){var a=utilx.stringSplit(this.message,rxSplitNewLine),b=this.name+": ";return utilx.gt(a.length,1)?(a=utilx.arrayFilter(a,function(a){var b;return utilx.stringContains(a,"opera:config#UserPrefs|Exceptions Have Stacktrace")||(b=a),b}),b+=utilx.arrayJoin(a,"\n")):b+=this.message,b},enumerable:!1,writable:!0,configurable:!0}}),d}var utilx={},UWORD32=Math.pow(2,32),MAX_UINT32=UWORD32-1,baseObject={},baseArray=[],baseString="",baseNumber=0,baseBoolean=!0,CtrBoolean=baseBoolean.constructor,CtrNumber=baseNumber.constructor,CtrString=baseString.constructor,protoName="__proto__",rxSplitNewLine=new RegExp("\\r\\n|\\n"),defaultProperties=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],tempSafariNFE;utilx.noop=function(){},utilx.privateUndefined=function(){return utilx.noop()}(),utilx.toNumber=function(a){return+a},utilx.equal=function(a,b){return a==b},utilx.notEqual=function(a,b){return a!=b},utilx.strictEqual=function(a,b){return a===b},utilx.notStrictEqual=function(a,b){return a!==b},utilx.lt=function(a,b){return b>a},utilx.lte=function(a,b){return b>=a},utilx.gt=function(a,b){return a>b},utilx.gte=function(a,b){return a>=b},utilx.mod=function(a,b){return a%b},utilx.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)},utilx.inRange=function(a,b,c){return utilx.gte(a,b)&&utilx.lte(a,c)},utilx.isUndefined=function(a){return utilx.strictEqual(typeof a,"undefined")},utilx.isNull=function(a){return utilx.strictEqual(a,null)},utilx.isUndefinedOrNull=function(a){return utilx.isUndefined(a)||utilx.isNull(a)},utilx.isTrue=function(a){return utilx.strictEqual(a,!0)},utilx.isFalse=function(a){return utilx.strictEqual(a,!1)},utilx.isBoolean=function(a){return utilx.isTrue(a)||utilx.isFalse(a)},utilx.toBoolean=function(a){return!!a},utilx.isNumber=function(a){return utilx.strictEqual(typeof a,"number")},utilx.isZero=function(a){return utilx.strictEqual(a,0)},utilx.isString=function(a){return utilx.strictEqual(typeof a,"string")},utilx.isPrimitive=function(a){return utilx.isUndefinedOrNull(a)||utilx.isString(a)||utilx.isNumber(a)||utilx.isBoolean(a)},utilx.isTypeOfObject=function(){var a,b=new RegExp("test"),c="object",d=utilx.strictEqual(typeof b,c);return tempSafariNFE=utilx.isTrue(d)?function(a){return utilx.strictEqual(typeof a,c)}:function(a){return utilx.strictEqual(typeof a,c)||utilx.isRegExp(a)},a=null,tempSafariNFE}(),utilx.isTypeObject=function(a){return!utilx.isNull(a)&&utilx.isTypeOfObject(a)},utilx.isEmptyString=function(a){return utilx.strictEqual(a,"")},utilx.isNumeric=function(){var a=new RegExp("^[+\\-]?");return function(b){var c,d=!1;return(utilx.isNumber(b)||utilx.isString(b))&&(c=b.toString().replace(a,""),!isNaN(parseFloat(c))&&isFinite(c)&&(d=!0)),d}}(),utilx.checkObjectCoercible=function(a){if(utilx.isUndefinedOrNull(a))throw new TypeError('Cannot convert "'+a+'" to object');return a},utilx.argToObject=function(a){var b=utilx.checkObjectCoercible(a);return utilx.isBoolean(b)?b=new CtrBoolean(b):utilx.isNumber(b)?b=new CtrNumber(b):utilx.isString(b)&&(b=new CtrString(b)),b},utilx.anyToString=function(a){var b;return b=utilx.isString(a)?a:utilx.isUndefined(a)?"undefined":String(a)},utilx.hasProperty=function(a,b){return b in a},utilx.isArguments=function(){function a(){return arguments}var b,c,d=baseObject.toString,e=baseObject.hasOwnProperty,f=baseObject.propertyIsEnumerable,g="[object Arguments]",h="[object Function]",i="[object Object]",j="callee",k="length";return tempSafariNFE=null,utilx.strictEqual(d.call(a()),g)?tempSafariNFE=function(a){return utilx.strictEqual(d.call(a),g)}:utilx.strictEqual(d.call(e),h)&&(b=function(a){return utilx.isTypeObject(a)&&utilx.strictEqual(d.call(a),i)&&e.call(a,j)&&e.call(a,k)&&utilx.isNumber(a.length)},tempSafariNFE=utilx.strictEqual(d.call(f),h)?function(a){return b(a)&&!f.call(a,j)&&!f.call(a,k)}:b),utilx.isNull(tempSafariNFE)&&(tempSafariNFE=function(a){return utilx.isTypeObject(a)&&utilx.strictEqual(d.call(a),i)&&utilx.hasProperty(a,j)&&utilx.hasProperty(a,k)&&utilx.isNumber(a.length)}),c=null,tempSafariNFE}(),utilx.toObjectString=function(){function a(){return arguments}var b,c=baseObject.toString,d="[object Undefined]",e="[object Null]",f="[object Arguments]";try{tempSafariNFE=null,utilx.strictEqual(c.call(),d)&&utilx.strictEqual(c.call(null),e)&&utilx.strictEqual(c.call(a()),f)&&(tempSafariNFE=function(a){return c.call(a)})}catch(g){tempSafariNFE=null}return utilx.isNull(tempSafariNFE)&&(tempSafariNFE=function(a){var b;return b=utilx.isUndefined(a)?d:utilx.isNull(a)?e:utilx.isArguments(a)?f:c.call(a)}),b=null,tempSafariNFE}(),utilx.isError=function(a){return utilx.strictEqual(utilx.toObjectString(a),"[object Error]")||utilx.isTypeObject(a)&&utilx.objectInstanceOf(a,Error)},utilx.isRegExp=function(a){return utilx.strictEqual(utilx.toObjectString(a),"[object RegExp]")&&utilx.isString(a.source)&&utilx.isBoolean(a.global)},utilx.isObject=function(a){return utilx.strictEqual(utilx.toObjectString(a),"[object Object]")},utilx.isFunction=function(a){return utilx.strictEqual(utilx.toObjectString(a),"[object Function]")||utilx.strictEqual(typeof a,"function")&&utilx.strictEqual(typeof a.call,"function")&&utilx.strictEqual(typeof a.apply,"function")},utilx.arrayIsArray=function(){var a,b=baseArray.isArray;return tempSafariNFE=utilx.isFunction(b)?b:function(a){return utilx.strictEqual(utilx.toObjectString(a),"[object Array]")&&utilx.isNumber(a.length)},a=null,tempSafariNFE}(),utilx.isEmptyArray=function(a){var b;return b=utilx.arrayIsArray(a)||utilx.isArguments(a)?utilx.isZero(a.length):null},utilx.arrayJoin=function(){var a,b=baseArray.join;return tempSafariNFE=utilx.strictEqual([1,2,3].join(),"1,2,3")?function(a,c){return b.call(a,c)}:function(a,c){return utilx.isUndefined(c)&&(c=","),b.call(a,c)},a=null,tempSafariNFE}(),utilx.arrayFirst=function(a){var b;return(utilx.arrayIsArray(a)||utilx.isArguments(a))&&(b=a[0]),b},utilx.arrayLast=function(a){var b;return(utilx.arrayIsArray(a)||utilx.isArguments(a))&&(b=a[a.length-1]),b},utilx.isDate=function(a){return utilx.strictEqual(utilx.toObjectString(a),"[object Date]")},utilx.objectIs=function(){var a,b=baseObject.constructor.is;return tempSafariNFE=utilx.isFunction(b)?b:function(a,b){var c;return c=utilx.strictEqual(a,b)?utilx.isZero(a)?utilx.strictEqual(1/a,1/b):!0:utilx.notStrictEqual(a,a)&&utilx.notStrictEqual(b,b)},a=null,tempSafariNFE}(),utilx.numberIsNaN=function(){var a,b=baseNumber.constructor.isNaN;return tempSafariNFE=utilx.isFunction(b)?b:function(a){return utilx.objectIs(a,0/0)},a=null,tempSafariNFE}(),utilx.numberIsFinite=function(){var a,b=baseNumber.constructor.isFinite;return tempSafariNFE=utilx.isFunction(b)?b:function(a){return utilx.isNumber(a)&&isFinite(a)},a=null,tempSafariNFE}(),utilx.mathSign=function(){var a,b=Math.sign;return tempSafariNFE=utilx.isFunction(b)?b:function(a){var b,c=utilx.toNumber(a);return b=utilx.isZero(c)||utilx.numberIsNaN(c)?c:utilx.lt(c,0)?-1:1},a=null,tempSafariNFE}(),utilx.numberToInteger=function(){var a,b=Number.toInteger;return tempSafariNFE=utilx.isFunction(b)?b:function(a){var b,c=utilx.toNumber(a);return b=utilx.numberIsNaN(c)?0:utilx.isZero(c)||!utilx.numberIsFinite(c)?c:utilx.mathSign(c)*Math.floor(Math.abs(c))},a=null,tempSafariNFE}(),utilx.toInt32=function(a){var b,c,d=utilx.toNumber(a);return utilx.isZero(d)||!utilx.numberIsFinite(d)?c=0:(b=utilx.mod(utilx.mathSign(d)*Math.floor(Math.abs(d)),UWORD32),c=utilx.gt(b,UWORD32)?b-UWORD32:b),c},utilx.toUint32=function(a){var b,c=utilx.toNumber(a);return b=utilx.isZero(c)||!utilx.numberIsFinite(c)?0:utilx.mod(utilx.mathSign(c)*Math.floor(Math.abs(c)),UWORD32)},utilx.arrayAssign=function(a,b,c){if(!utilx.arrayIsArray(a))throw new TypeError("called on a non-array");return utilx.gte(arguments.length,3)&&(b=utilx.numberToInteger(b),utilx.inRange(b,0,MAX_UINT32-1)&&(a[b]=c,a.length=Math.min(a.length,b+1))),a.length},utilx.arrayPush=function(a){return utilx.arrayForEach(utilx.arraySlice(arguments,1),function(b){baseArray.push.call(a,b)}),a.length},utilx.arrayUnshift=function(a){return utilx.arrayForEach(utilx.arraySlice(arguments,1),function(b){baseArray.unshift.call(a,b)}),a.length},utilx.stringSplit=function(){var a=baseString.split,b=utilx.isUndefined(new RegExp("()??").exec("")[1]);return function(c,d,e){var f,g,h,i,j,k,l,m,n=utilx.anyToString(utilx.checkObjectCoercible(c));if(utilx.isRegExp(d)){for(g="g",d.ignoreCase&&(g+="i"),d.multiline&&(g+="m"),d.extended&&(g+="x"),d.sticky&&(g+="y"),d=new RegExp(d.source,g),utilx.isFalse(b)&&(i=new RegExp("^"+d.source+"$(?!\\s)",g)),e=utilx.isUndefined(e)?MAX_UINT32:utilx.clamp(utilx.numberToInteger(e),0,MAX_UINT32),f=[],g="g",h=0,j=d.exec(n);j&&(k=j.index+utilx.arrayFirst(j).length,!utilx.gt(k,h)||(utilx.arrayPush(f,n.slice(h,j.index)),utilx.isFalse(b)&&utilx.gt(j.length,1)&&stringSplitReplacer(i,j,arguments),utilx.gt(j.length,1)&&utilx.lt(j.index,n.length)&&(f=f.concat(j.slice(1))),l=utilx.arrayFirst(j).length,h=k,!utilx.gte(f.length,e)));)utilx.strictEqual(d.lastIndex,j.index)&&(d.lastIndex+=1),j=d.exec(n);if(utilx.strictEqual(h,n.length)?(l||!d.test(""))&&utilx.arrayPush(f,""):utilx.arrayPush(f,n.slice(h)),utilx.gt(f.length,e))return f.slice(0,e);m=f}else m=a.call(c,d,e);return m}}(),utilx.firstChar=function(a){return utilx.anyToString(utilx.checkObjectCoercible(a)).charAt(0)},utilx.firstCharIs=function(a,b){return utilx.strictEqual(utilx.firstChar(a),utilx.firstChar(b))},utilx.lastChar=function(a){var b=utilx.anyToString(utilx.checkObjectCoercible(a));return b.charAt(b.length-1)},utilx.lastCharIs=function(a,b){return utilx.strictEqual(utilx.lastChar(a),utilx.firstChar(b))},utilx.countCharacter=function(a,b){return utilx.clamp(utilx.stringSplit(utilx.anyToString(utilx.checkObjectCoercible(a)),utilx.firstChar(b)).length-1,0,Number.POSITIVE_INFINITY)},utilx.padLeadingChar=function(a,b,c){var d=utilx.anyToString(utilx.checkObjectCoercible(a)),e=utilx.firstChar(b),f=utilx.numberToInteger(c)-d.length;return(utilx.lt(f,0)||utilx.strictEqual(f,1/0))&&(f=0),utilx.stringRepeat(e,f)+d},utilx.stringRepeat=function(){function a(b,c){var d,e;return utilx.lt(c,1)?e="":utilx.mod(c,2)?e=a(b,c-1)+b:(d=a(b,c/2),e=d+d),e}var b,c=baseString.constructor.repeat;return tempSafariNFE=utilx.isFunction(c)?function(a,b){return c.call(a,b)}:function(b,c){var d=utilx.anyToString(utilx.checkObjectCoercible(b)),e=utilx.numberToInteger(c);if(utilx.lt(e,0)||utilx.strictEqual(e,1/0))throw new RangeError;return a(d,e)},b=null,tempSafariNFE}(),utilx.stringStartsWith=function(){var a,b=baseString.constructor.startsWith;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d=utilx.anyToString(utilx.checkObjectCoercible(a)),e=utilx.anyToString(b),f=utilx.clamp(utilx.numberToInteger(c),0,d.length);return utilx.strictEqual(d.slice(f,f+e.length),e)},a=null,tempSafariNFE}(),utilx.stringEndsWith=function(){var a,b=baseString.constructor.endsWith;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f=utilx.anyToString(utilx.checkObjectCoercible(a)),g=utilx.anyToString(b),h=f.length;return c=utilx.isUndefined(c)?h:utilx.numberToInteger(c),d=utilx.clamp(c,0,h),e=d-g.length,utilx.gte(e,0)&&utilx.strictEqual(f.slice(e,d),g)},a=null,tempSafariNFE}(),utilx.stringContains=function(){var a,b=baseString.constructor.contains;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d=utilx.anyToString(utilx.checkObjectCoercible(a)),e=utilx.anyToString(b),f=d.length;return c=utilx.isUndefined(c)?0:utilx.numberToInteger(c),utilx.notStrictEqual(baseString.indexOf.call(d,e,utilx.clamp(c,0,f)),-1)},a=null,tempSafariNFE}(),utilx.objectGetPrototypeOf=function(){var a,b,c=baseObject.constructor.getPrototypeOf;return utilx.isFunction(c)?tempSafariNFE=c:utilx.isNull(baseObject.constructor.prototype[protoName])?tempSafariNFE=function(a){return a[protoName]}:(b=baseObject.constructor.prototype,tempSafariNFE=function(a){if(utilx.strictEqual(a,b))return null;var c=a.constructor.prototype;return utilx.strictEqual(a,c)?b:c}),a=null,tempSafariNFE}(),utilx.arrayContains=function(a,b){return utilx.notStrictEqual(utilx.arrayIndexOf(a,b),-1)},utilx.objectHasOwnProperty=function(){function a(a,b){return e&&utilx.arrayContains(defaultProperties,b)&&utilx.hasProperty(a,b)&&utilx.notStrictEqual(a[b],utilx.objectGetPrototypeOf(a)[b])}var b,c=baseObject.hasOwnProperty,d=baseObject.propertyIsEnumerable,e=!0,f={toString:null};for(b in f)utilx.strictEqual(b,"toString")&&utilx.isNull(f[b])&&(e=!1);return tempSafariNFE=utilx.isFunction(c)?function(b,d){return c.call(b,d)||a(b,d)}:utilx.isFunction(d)?function(b,c){return d.call(b,c)||a(b,c)}:function(a,b){return utilx.hasProperty(a,b)&&utilx.isUndefined(utilx.objectGetPrototypeOf(a)[b])},b=null,tempSafariNFE}(),utilx.toObjectFixIndexedAccess=function(){var a,b=baseObject.constructor("a"),c=utilx.notStrictEqual(b[0],"a")||!utilx.hasProperty(b,0);return tempSafariNFE=function(a){var b;return b=c&&utilx.isString(a)?utilx.stringSplit(a,""):utilx.argToObject(a)},a=null,tempSafariNFE}(),utilx.arrayForEach=function(){var a,b=baseArray.forEach;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f=utilx.toObjectFixIndexedAccess(a);if(!utilx.isFunction(b))throw new TypeError(b+" is not a function");for(d=utilx.clamp(utilx.numberToInteger(f.length),0,MAX_UINT32),e=0;utilx.lt(e,d);e+=1)utilx.hasProperty(f,e)&&b.call(c,f[e],e,f)},a=null,tempSafariNFE}(),utilx.arraySome=function(){var a,b=baseArray.some;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f,g=utilx.toObjectFixIndexedAccess(a);if(!utilx.isFunction(b))throw new TypeError(b+" is not a function");for(d=utilx.clamp(utilx.numberToInteger(g.length),0,MAX_UINT32),f=!1,e=0;utilx.lt(e,d);e+=1)if(utilx.hasProperty(g,e)&&b.call(c,g[e],e,g)){f=!0;break}return f},a=null,tempSafariNFE}(),utilx.arrayMap=function(){var a,b=baseArray.map;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f,g=utilx.toObjectFixIndexedAccess(a);if(!utilx.isFunction(b))throw new TypeError(b+" is not a function");for(d=utilx.clamp(utilx.numberToInteger(g.length),0,MAX_UINT32),f=[],e=0;utilx.lt(e,d);e+=1)utilx.arrayAssign(f,e,b.call(c,g[e],e,g));return f},a=null,tempSafariNFE}(),utilx.arraySlice=function(){function a(){return arguments}function b(){return a(utilx.privateUndefined,null,1,"a",2,"b",null,utilx.privateUndefined)}var c,d=baseArray.slice;try{utilx.strictEqual(d.call(b()).toString(),",,1,a,2,b,,")&&utilx.strictEqual(d.call(b(),utilx.privateUndefined,utilx.privateUndefined).toString(),",,1,a,2,b,,")&&utilx.strictEqual(d.call(b(),-1).length,1)&&utilx.strictEqual(d.call(b(),0).toString(),",,1,a,2,b,,")&&utilx.strictEqual(d.call(b(),3).toString(),"a,2,b,,")&&utilx.strictEqual(d.call(b(),-1,4).length,0)&&utilx.strictEqual(d.call(b(),0,4).toString(),",,1,a")&&utilx.strictEqual(d.call(b(),3,6).toString(),"a,2,b")||(d=utilx.privateUndefined)}catch(e){d=utilx.privateUndefined}return tempSafariNFE=utilx.isFunction(d)?function(a,b,c){return d.call(a,b,c)}:function(a,b,c){var d,e,f,g=utilx.toObjectFixIndexedAccess(a),h=utilx.numberToInteger(b),i=utilx.clamp(utilx.numberToInteger(g.length),0,MAX_UINT32),j=[],k=0;for(f=utilx.lt(utilx.mathSign(h),0)?Math.max(i+h,0):Math.min(h,i),d=utilx.isUndefined(c)?i:utilx.numberToInteger(c),e=utilx.lt(utilx.mathSign(d),0)?Math.max(i+d,0):Math.min(d,i),j.length=Math.max(e-f,0);e>f;)utilx.arrayAssign(j,k,g[f]),k+=1,f+=1;return j},c=null,tempSafariNFE}(),utilx.arrayFilter=function(){var a,b=baseArray.filter;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f,g,h=utilx.toObjectFixIndexedAccess(a),i=0;if(!utilx.isFunction(b))throw new TypeError(b+" is not a function");for(d=utilx.clamp(utilx.numberToInteger(h.length),0,MAX_UINT32),e=[],f=0;utilx.lt(f,d);f+=1)g=h[f],b.call(c,g,f,h)&&(utilx.arrayAssign(e,i,g),i+=1);return e},a=null,tempSafariNFE}(),utilx.arrayReduce=function(){var a,b=baseArray.reduce;return tempSafariNFE=utilx.isFunction(b)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f,g=utilx.toObjectFixIndexedAccess(a),h=!1;if(!utilx.isFunction(b))throw new TypeError(b+" is not a function");for(console.log("length",arguments.length),utilx.gt(arguments.length,2)&&(d=c,h=!0),e=utilx.clamp(utilx.numberToInteger(g.length),0,MAX_UINT32),f=0;utilx.lt(f,e);f+=1)utilx.objectHasOwnProperty(g,f)&&(d=b(d,g[f],f,g),utilx.isFalse(h)&&(h=!0));if(utilx.isFalse(h))throw new TypeError("Reduce of empty array with no initial value");return d},a=null,tempSafariNFE}(),utilx.stringTrim=function(){var a,b,c,d,e=baseString.trim,f=[9,10,11,12,13,32,133,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8232,8233,8239,8287,12288,65279];return a=utilx.arrayReduce(f,buildTestString,""),utilx.isFunction(e)&&utilx.isZero(e.call(a).length)?tempSafariNFE=function(a){return e.call(a)}:(b=utilx.arrayReduce(f,function(a,b){return a+"\\u"+utilx.padLeadingChar(b.toString(16),"0",4)},""),c=new RegExp("^["+b+"]+|["+b+"]+$","g"),tempSafariNFE=function(a){return utilx.anyToString(utilx.checkObjectCoercible(a)).replace(c,"")}),d=null,tempSafariNFE}(),utilx.arrayIndexOf=function(){var a,b=baseArray.indexOf;return tempSafariNFE=utilx.isFunction(b)&&utilx.strictEqual(b.call([0,1],1,2),1)?function(a,c,d){return b.call(a,c,d)}:function(a,b,c){var d,e,f,g=utilx.toObjectFixIndexedAccess(a),h=utilx.clamp(utilx.numberToInteger(g.length),0,MAX_UINT32);if(utilx.isZero(h))f=-1;else if(c=utilx.gt(arguments.length,2)?utilx.numberToInteger(c):0,utilx.gte(c,h))f=-1;else for(e=utilx.gte(c,0)?c:h-Math.abs(c),utilx.lt(e,0)&&(e=0),d=e,f=-1;utilx.lt(d,h);d+=1)if(utilx.hasProperty(g,d)&&utilx.strictEqual(b,g[d])){f=d;break}return f},a=null,tempSafariNFE}(),utilx.objectKeys=function(){var a,b=baseObject.keys;return tempSafariNFE=utilx.isFunction(b)&&utilx.isFunction(baseObject.hasOwnProperty)?b:function(a){if(!utilx.isTypeObject(a)&&!utilx.isFunction(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)utilx.objectHasOwnProperty(a,b)&&utilx.arrayPush(c,b);return c},a=null,tempSafariNFE}(),utilx.objectDefineProperty=function(){var a,b,c,d,e=baseObject.constructor.defineProperty,f="__defineGetter__",g="__defineSetter__";if(utilx.isFunction(e))try{c=e({},"sentinel",{value:null}),utilx.isNull(c.sentinel)||(e=null)}catch(h){e=null}return utilx.isFunction(e)?tempSafariNFE=e:(a=baseObject[f],b=baseObject[g],tempSafariNFE=function(c,d,e){var f;if(!utilx.isTypeObject(c)&&!utilx.isFunction(c))throw new TypeError("Object.defineProperty called on non-object");if(!utilx.isTypeObject(e)&&!utilx.isFunction(e))throw new TypeError("Property description must be an object");if(utilx.objectHasOwnProperty(e,"value"))utilx.isNull(utilx.objectGetPrototypeOf(baseObject)[protoName])?(f=c[protoName],c[protoName]=utilx.objectGetPrototypeOf(baseObject),delete c[d],c[d]=e.value,c[protoName]=f):c[d]=e.value;else{if(!utilx.isFunction(a)||!utilx.isFunction(b))throw new TypeError("getters & setters can not be defined on this javascript engine");utilx.isFunction(e.get)&&a.call(c,d,e.get),utilx.isFunction(e.set)&&b.call(c,d,e.set)}return c}),d=null,tempSafariNFE}(),utilx.objectDefineProperties=function(){var a,b=baseObject.constructor.defineProperties;return tempSafariNFE=utilx.isFunction(b)?b:function(a,b){if(!utilx.isTypeObject(a)&&!utilx.isFunction(a))throw new TypeError("Object.defineProperties called on non-object");if(!utilx.isTypeObject(b)&&!utilx.isFunction(b))throw new TypeError("Property description must be an object");return utilx.arrayForEach(utilx.objectKeys(b),function(c){utilx.objectDefineProperty(a,c,b[c])}),a},a=null,tempSafariNFE}(),utilx.objectGetOwnPropertyDescriptor=function(){var a,b,c,d,e=baseObject.constructor.getOwnPropertyDescriptor,f="__lookupGetter__",g="__lookupSetter__";if(utilx.isFunction(e))try{c={sentinel:null},utilx.isNull(e(c,"sentinel").value)||(e=null)}catch(h){e=null}return utilx.isFunction(e)?tempSafariNFE=e:(a=baseObject[f],b=baseObject[g],tempSafariNFE=function(c,d){var e,f,g,h;if(!utilx.isTypeObject(c)&&!utilx.isFunction(c))throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object");return utilx.objectHasOwnProperty(c,d)&&(e={enumerable:!0,configurable:!0},utilx.isFunction(a)&&utilx.isFunction(b)&&(f=c[protoName],c[protoName]=utilx.objectGetPrototypeOf(baseObject),g=a.call(c,d),h=b.call(c,d),c[protoName]=f,(utilx.isFunction(g)||utilx.isFunction(h))&&(utilx.isFunction(g)&&(e.get=g),utilx.isFunction(h)&&(e.set=h))),e.value=c[d],e.writable=!0),e}),d=null,tempSafariNFE}(),utilx.objectFreeze=function(){var a,b=baseObject.constructor.freeze;return tempSafariNFE=utilx.isFunction(b)?b:function(a){if(!utilx.isTypeObject(a)&&!utilx.isFunction(a))throw new TypeError("Object.freeze called on non-object");return a},a=null,tempSafariNFE}();try{utilx.objectFreeze(utilx.noop)}catch(exception){utilx.objectFreeze=function(a){var b;return tempSafariNFE=function(b){var c;return c=utilx.isFunction(b)?b:a(b)},b=null,tempSafariNFE}(utilx.objectFreeze)}return utilx.objectIsFrozen=function(){var a,b=baseObject.constructor.isFrozen;return tempSafariNFE=utilx.isFunction(b)?b:function(a){if(!utilx.isTypeObject(a)&&!utilx.isFunction(a))throw new TypeError("Object.isFrozen called on non-object");return!1},a=null,tempSafariNFE}(),utilx.deepFreeze=function(a){return utilx.objectFreeze(a),utilx.arrayForEach(utilx.objectKeys(a),function(b){var c=a[b];!utilx.isTypeObject(c)&&!utilx.isFunction(c)||utilx.objectIsFrozen(c)||utilx.deepFreeze(c)}),a},utilx.objectInstanceOf=function(){var a,b=baseObject.constructor.prototype.isPrototypeOf;return utilx.isFunction(b)?tempSafariNFE=function(a,c){if(!utilx.isFunction(c))throw new TypeError("Expecting a function in instanceOf check");return b.call(c.prototype,a)}:utilx.isFunction(utilx.objectGetPrototypeOf)&&(tempSafariNFE=function(a,b){if(!utilx.isFunction(b))throw new TypeError("Expecting a function in instanceOf check");for(var c=!1;a;){if(utilx.strictEqual(a,b.prototype)){c=!0;break}a=utilx.objectGetPrototypeOf(a)}return c}),a=null,tempSafariNFE}(),utilx.objectCreate=function(){var a,b,c,d;try{b=baseObject.constructor.create,d=b(ObjectCreateFunc.prototype,{constructor:{value:ObjectCreateFunc,enumerable:!1,writable:!0,configurable:!0},foo:{value:"test",enumerable:!1,writable:!0,configurable:!0}}),utilx.strictEqual(d.foo,"test")?(tempSafariNFE=b,a=!0):a=!1}catch(e){a=!1}return utilx.isFalse(a)&&(tempSafariNFE=function(a,b){if(!utilx.isTypeObject(a)&&!utilx.isFunction(a))throw new TypeError("Object prototype may only be an Object, but not null.");var c;return ObjectCreateFunc.prototype=a,c=new ObjectCreateFunc,utilx.objectDefineProperty(c,protoName,{value:a,enumerable:!1,writable:!0,configurable:!0}),utilx.isPlainObject(b)&&utilx.objectDefineProperties(c,b),c}),c=null,tempSafariNFE}(),utilx.isPlainObject=function(){var a=utilx.objectGetPrototypeOf(baseObject);return function(b){return utilx.isObject(b)&&utilx.strictEqual(utilx.objectGetPrototypeOf(b),a)}}(),utilx.extend=function(a){if(!utilx.isTypeObject(a)&&!utilx.isFunction(a))throw new TypeError('utilx.extend "target" is a non-object');return utilx.arrayForEach(utilx.arraySlice(arguments,1),function(b){(utilx.isTypeObject(b)||utilx.isFunction(b))&&utilx.arrayForEach(utilx.objectKeys(b),function(c){utilx.objectDefineProperty(a,c,utilx.objectGetOwnPropertyDescriptor(b,c))})}),a},utilx.isDateValid=function(a){return utilx.isDate(a)&&!utilx.numberIsNaN(a.getTime())},utilx.isDigits=function(){var a=new RegExp("^\\d+$");return function(b){return utilx.isString(b)&&a.test(b)}}(),utilx.escapeRegex=function(){var a=new RegExp("[\\[\\](){}?*+\\^$\\\\.|]","g");return function(b){return b.replace(a,"\\$&")}}(),utilx.wrapInChar=function(a,b){return b+a+b},utilx.replaceAll=function(a,b,c){return a.replace(new RegExp(utilx.escapeRegex(b),"g"),c)},utilx.getRandomInt=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},utilx.deepEqual=function(a,b,c){if(utilx.isPlainObject(c)||(c={}),utilx.objectIs(a,b))return!0;if(utilx.isDate(a)&&utilx.isDate(b))return utilx.objectIs(a.getTime(),b.getTime());if(utilx.isRegExp(a)&&utilx.isRegExp(b))return utilx.objectIs(a.source,b.source)&&utilx.objectIs(a.global,b.global)&&utilx.objectIs(a.multiline,b.multiline)&&utilx.objectIs(a.lastIndex,b.lastIndex)&&utilx.objectIs(a.ignoreCase,b.ignoreCase)&&utilx.objectIs(a.sticky,b.sticky);if(!utilx.isTypeObject(a)&&!utilx.isTypeObject(b))return utilx.isTrue(c.strict)?utilx.objectIs(a,b):utilx.equal(a,b);if(utilx.isTrue(c.strict)){if(!utilx.objectIs(utilx.objectGetPrototypeOf(utilx.toObjectFixIndexedAccess(a)),utilx.objectGetPrototypeOf(utilx.toObjectFixIndexedAccess(b))))return!1}else if(!utilx.objectIs(a.prototype,b.prototype))return!1;if(utilx.isArguments(a))return utilx.isArguments(b)?utilx.deepEqual(utilx.arraySlice(a),utilx.arraySlice(b),c):!1;var d,e,f;try{d=utilx.objectKeys(a),e=utilx.objectKeys(b)}catch(g){return!1}if(utilx.objectIs(d.length,e.length)){if(d.sort(),e.sort(),f=utilx.arraySome(d,function(a,b){return!utilx.objectIs(a,e[b])}),utilx.isTrue(f))return!1}else{if(!utilx.arrayIsArray(a)||!utilx.arrayIsArray(b))return!1;if(!utilx.objectIs(a.length,b.length))return!1}return f=utilx.arraySome(d,function(d){return!utilx.deepEqual(a[d],b[d],c)}),utilx.isTrue(f)?!1:!0},utilx.deepStrictEqual=function(a,b){return utilx.deepEqual(a,b,{strict:!0})},utilx.jsonStringify=function(){var a,b,c,d,e,f,g,h,i,j,k=!1;if("object"==typeof JSON&&!utilx.isNull(JSON)&&utilx.isFunction(JSON.stringify)){a=function(){return 1},a.toJSON=a().toString();try{k=utilx.strictEqual(JSON.stringify(0),"0")&&utilx.strictEqual(JSON.stringify(new CtrNumber),"0")&&utilx.strictEqual(JSON.stringify(new CtrString),'""')&&utilx.strictEqual(JSON.stringify(isNaN),utilx.privateUndefined)&&utilx.strictEqual(JSON.stringify(utilx.privateUndefined),utilx.privateUndefined)&&utilx.strictEqual(JSON.stringify(),utilx.privateUndefined)&&utilx.strictEqual(JSON.stringify(a),"1")&&utilx.strictEqual(JSON.stringify([a]),"[1]")&&utilx.strictEqual(JSON.stringify([utilx.privateUndefined]),"[null]")&&utilx.strictEqual(JSON.stringify(null),"null")&&utilx.strictEqual(JSON.stringify([utilx.privateUndefined,isNaN,null]),"[null,null,null]")&&utilx.strictEqual(JSON.stringify({A:[a,!0,!1,null,"\b\n\f\r	"]}),'{"A":[1,true,false,null,"\\b\\n\\f\\r\\t"]}')&&utilx.strictEqual(JSON.stringify(null,a),"1")&&utilx.strictEqual(JSON.stringify([1,2],null,1),"[\n 1,\n 2\n]")&&utilx.strictEqual(JSON.stringify(new Date(-864e13)),'"-271821-04-20T00:00:00.000Z"')&&utilx.strictEqual(JSON.stringify(new Date(864e13)),'"+275760-09-13T00:00:00.000Z"')&&utilx.strictEqual(JSON.stringify(new Date(-621987552e5)),'"-000001-01-01T00:00:00.000Z"')&&utilx.strictEqual(JSON.stringify(new Date(-1)),'"1969-12-31T23:59:59.999Z"')}catch(l){k=!1}}return utilx.isTrue(k)?tempSafariNFE=JSON.stringify:(b='[\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5',b+="\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]",c=new RegExp(b,"g"),f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h=function(a){var b='"';return c.lastIndex=0,b+=c.test(a)?a.replace(c,function(a){var b,c=f[a];return b=utilx.isString(c)?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}):a,b+'"'},i=function(a,b){var c,f,j,k,l=d,m=b[a];switch((utilx.isTypeObject(m)||utilx.isFunction(m))&&utilx.isFunction(m.toJSON)&&(m=m.toJSON(a)),utilx.isFunction(g)&&(m=g.call(b,a,m)),typeof m){case"string":return h(m);case"number":return utilx.numberIsFinite(m)?utilx.anyToString(m):"null";case"boolean":case"null":return utilx.anyToString(m);case"object":if(utilx.isNull(m))return"null";if(d+=e,k=[],utilx.arrayIsArray(m)){for(j=m.length,c=0;j>c;c+=1)utilx.arrayAssign(k,c,i(c,m)||"null");return f=utilx.isZero(k.length)?"[]":d?"[\n"+d+utilx.arrayJoin(k,",\n"+d)+"\n"+l+"]":"["+utilx.arrayJoin(k)+"]",d=l,f}return utilx.arrayIsArray(g)?utilx.arrayForEach(g,function(a){var b;utilx.isString(a)&&(b=i(a,m),b&&utilx.arrayPush(k,h(a)+(d?": ":":")+b))}):utilx.arrayForEach(utilx.objectKeys(m),function(a){var b=i(a,m);b&&utilx.arrayPush(k,h(a)+(d?": ":":")+b)}),f=utilx.isZero(k.length)?"{}":d?"{\n"+d+utilx.arrayJoin(k,",\n"+d)+"\n"+l+"}":"{"+utilx.arrayJoin(k)+"}",d=l,f}return utilx.privateUndefined},tempSafariNFE=function(a,b,c){var f;if(d="",e="",utilx.isNumber(c))for(f=0;c>f;f+=1)e+=" ";else utilx.isString(c)&&(e=c);if(g=b,!utilx.isUndefinedOrNull(b)&&!utilx.isFunction(b)&&!utilx.arrayIsArray(b))throw new Error("JSON.stringify");return i("",{"":a})}),j=null,tempSafariNFE}(),utilx.jsonParse=function(){var supported=!1,parsedValue,throwsSyntaxError,rx1,rx2,rx3,rx4,cxStr,cx,nfeJSONParse;if("object"==typeof JSON&&!utilx.isNull(JSON)&&utilx.isFunction(JSON.parse))try{if(utilx.isZero(JSON.parse("0"))&&utilx.isFalse(JSON.parse(!1))&&(parsedValue=JSON.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'),supported=utilx.strictEqual(parsedValue.A.length,5),supported=supported&&utilx.strictEqual(parsedValue.A[0],1))){try{supported=utilx.isString(JSON.parse('"	"'))}catch(ignore){}if(supported)try{supported=utilx.notStrictEqual(JSON.parse("01"),1)}catch(ignore){}}}catch(e){supported=!1}if(utilx.isTrue(supported)){try{JSON.parse()}catch(e){throwsSyntaxError=utilx.objectInstanceOf(e,SyntaxError)}tempSafariNFE=throwsSyntaxError?JSON.parse:function(a,b){if(utilx.isUndefined(a))throw new SyntaxError("JSON.parse");return JSON.parse(a,b)}}else rx1=new RegExp("^[\\],:{}\\s]*$"),rx2=new RegExp('\\\\(?:["\\\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),rx3=new RegExp('"[^"\\\\\\n\\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),rx4=new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),cxStr="[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f",cxStr+="\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]",cx=new RegExp(cxStr,"g"),tempSafariNFE=function nfeJSONParse(text,reviver){function walk(a,b){var c=a[b];return utilx.isTypeObject(c)&&utilx.arrayForEach(utilx.objectKeys(c),function(a){var b=walk(c,a);utilx.isUndefined(b)?delete c[a]:c[a]=b}),reviver.call(a,b,c)}var j;if(text=utilx.anyToString(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx1.test(text.replace(rx2,"@").replace(rx3,"]").replace(rx4,"")))return j=eval("("+text+")"),utilx.isFunction(reviver)?walk({"":j},""):j;throw new SyntaxError("JSON.parse")};return nfeJSONParse=null,tempSafariNFE}(),utilx.stringTruncate=function(a,b){return utilx.isString(a)||(a=utilx.anyToString(a)),b=utilx.toNumber(b),!utilx.numberIsNaN(b)&&utilx.gte(b,0)&&utilx.gt(a.length,b)&&(a=a.slice(0,b)),a
},utilx.inherits=function(a,b){if(!utilx.isFunction(a))throw new TypeError(a+" is not a function");if(!utilx.isFunction(b))throw new TypeError(b+" is not a function");a.super_=b,a.prototype=utilx.objectCreate(b.prototype),utilx.objectDefineProperty(a.prototype,"constructor",{value:a,enumerable:!1,writable:!0,configurable:!0})},utilx.isErrorTypeConstructor=function(a){var b;switch(a){case Error:case TypeError:case SyntaxError:case RangeError:case EvalError:case ReferenceError:case URIError:b=!0;break;default:b=!1}return b},utilx.customErrorReplacer=function(a,b){var c;return c=utilx.isString(b)?b:utilx.isUndefined(b)||utilx.isFunction(b)||utilx.isRegExp(b)||utilx.isNumber(b)&&!utilx.numberIsFinite(b)?utilx.anyToString(b):b},utilx.customError=function(){var a,b;try{b=makeCustomError("CustomSyntaxError",SyntaxError),a=utilx.objectInstanceOf(new b("test"),SyntaxError)}catch(c){a=!1}return function(b,c,d){if(!utilx.isString(b))throw new TypeError('"name" was not a string');if(utilx.isEmptyString(b))throw new SyntaxError('"name" was an empty string');return utilx.isUndefined(d)&&(utilx.isNumber(c)||utilx.isString(c))&&(d=c,c=Error),a&&utilx.isErrorTypeConstructor(c)||(c=Error),makeCustomError(b,c,d)}}(),tempSafariNFE=null,utilx}var publicUtil=factory();if(publicUtil.factory=function(){var a=factory();return a.factory=publicUtil.factory,a},"object"!=typeof globalThis||null===globalThis)throw new TypeError("Invalid global context");"object"==typeof module&&null!==module&&"object"==typeof module.exports&&null!==module.exports?module.exports=publicUtil:"function"==typeof define&&"object"==typeof define.amd&&null!==define.amd?define(publicUtil):globalThis.utilx=publicUtil}(this);